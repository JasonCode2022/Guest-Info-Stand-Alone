import{r as t,c as s,h as i}from"./p-fbb2db7d.js";const e="";const l=class{constructor(i){t(this,i);this.formDataSubmitted=s(this,"formDataSubmitted",7);this.allCountries=[];this.responseD=undefined;this.opened=undefined;this.data=null;this.firstname="";this.lastname="";this.email="";this.alternateemail="";this.password="";this.country="";this.city="";this.adress="";this.countrycode="";this.mobilenumber="";this.newsletter=false;this.currency="";this.language="";this.formSubmitted=false;this.showFormError=false}fetchGettedData(t,s){if(this.data!==null&&t!==s){this.firstname=this.data.My_Result.My_Guest.FIRST_NAME;this.lastname=this.data.My_Result.My_Guest.LAST_NAME;this.email=this.data.My_Result.My_Guest.My_User.EMAIL;this.alternateemail=this.data.My_Result.My_Guest.My_User.DISCLOSED_EMAIL;this.password=this.data.My_Result.My_Guest.My_User.PASSWORD;this.country=this.data.My_Result.My_Guest.COUNTRY_ID;this.city=this.data.My_Result.My_Guest.CITY;this.adress=this.data.My_Result.My_Guest.ADDRESS;this.mobilenumber=this.data.My_Result.My_Guest.MOBILE;this.countrycode=this.data.My_Result.My_Guest.PHONE_PREFIX;this.newsletter=this.data.My_Result.My_Guest.IS_NEWS_LETTER}else{this.firstname="";this.lastname="";this.email="";this.alternateemail="";this.password="";this.country="";this.city="";this.adress="";this.mobilenumber="";this.countrycode="";this.newsletter=false}}async componentDidLoad(){const t=await this.fetchDataFromAPI();if(t){this.firstname=t.firstname;this.lastname=t.lastname;this.email=t.email;this.alternateemail=t.alternateemail;this.password=t.password;this.country=t.country;this.city=t.city;this.adress=t.adress;this.countrycode=t.countrycode;this.mobilenumber=t.mobilenumber;this.newsletter=t.newsletter}}async fetchDataFromAPI(){try{const t=new Headers;t.append("Content-Type","application/json");const s=JSON.stringify({language:"EN"});const i={method:"POST",headers:t,body:s,redirect:"follow"};const e=await fetch("https://gateway.igloorooms.com/IR/Get_Exposed_Countries?Ticket=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2OTEzMDY5NzEsIkNMQUlNLTAxIjoicktLMi9DY1dQQnM9IiwiQ0xBSU0tMDIiOiI5UStMQm93VTl6az0iLCJDTEFJTS0wMyI6Ilp3Tys5azJoTzUwPSIsIkNMQUlNLTA0IjoiZE5oVHRrc2lQaSt5MDdRVkMwN3hwczNRdEJZMEE3eCtkbXR3TWlJdHRaTT0ifQ.6YTCQAE9mS9z0aJutGCzvc9O64bqgYFCINguW_uIb5k",i);this.responseD=e.ok;if(!e.ok){throw new Error("Network response was not ok")}const l=await e.json();this.allCountries=l.My_Result}catch(t){console.error("Error fetching data:",t);return null}}handleCheckboxChange(t){const s=t.target;this.newsletter=s.checked}async handleSubmit(t){t.preventDefault();const s={firstname:this.firstname,lastname:this.lastname,email:this.email,alternateemail:this.alternateemail,password:this.password,country:this.country,city:this.city,adress:this.adress,countrycode:this.countrycode,mobilenumber:this.mobilenumber,newsletter:this.newsletter};this.formDataSubmitted.emit(s)}saveGuestDetailsClick(t){t.preventDefault();if(this.firstname.trim()===""||this.lastname.trim()===""||this.email.trim()===""||this.password.trim()===""||this.country.trim()===""||this.countrycode.trim()===""||this.mobilenumber.trim()===""){this.showFormError=true;console.log("Please Fill All Required Fields!")}else{this.handleSubmit(t)}}render(){let t=null;let s=null;let e=null;const l=new Date;const a=l.getDate();const h=l.toLocaleString("default",{month:"short"});const n=l.getFullYear();const o=`${a}-${h}-${n}`;if(this.responseD){s=this.allCountries.map((t=>i("option",{value:t.name,key:t.id},t.name)));e=this.allCountries.map((t=>i("option",{value:t.phone_prefix,key:t.id},t.phone_prefix)))}if(this.opened){t=[i("div",{id:"main-container"},i("h3",null,"Guest Details"),i("div",{id:"form-container"},i("div",null,i("form",{action:""},i("div",null,i("p",{id:"rg-date"},"Registration date : ",i("span",{id:"a"},o))),i("div",{class:"input-container"},i("label",{htmlFor:"firstName"},"First Name*"),i("input",{type:"text",id:"firstName",placeholder:"",value:this.firstname,onChange:t=>this.firstname=t.target.value})),i("div",null,this.showFormError&&this.firstname.trim()===""?i("p",{class:"error-message"},"Please Fill This Field."):null),i("div",{class:"input-container"},i("label",{htmlFor:"lastname"},"Last Name*"),i("input",{type:"text",id:"lastName",placeholder:"",value:this.lastname,onChange:t=>this.lastname=t.target.value})),i("div",null,this.showFormError&&this.lastname.trim()===""?i("p",{class:"error-message"},"Please Fill This Field."):null),i("div",{class:"input-container"},i("label",{htmlFor:"email"},"Email*"),i("input",{type:"email",id:"email",placeholder:"",value:this.email,onChange:t=>this.email=t.target.value})),i("div",null,this.showFormError&&this.email.trim()===""?i("p",{class:"error-message"},"Please Fill This Field."):null),i("div",{class:"input-container"},i("label",{htmlFor:"email"},"Alternate email"),i("input",{type:"email",id:"Alt-email",placeholder:"",value:this.alternateemail,onChange:t=>this.alternateemail=t.target.value})),i("div",{class:"input-container"},i("label",{htmlFor:"password"},"Password*"),i("input",{type:"password",id:"password",placeholder:"",value:this.password,onChange:t=>this.password=t.target.value})),i("div",null,this.showFormError&&this.password.trim()===""?i("p",{class:"error-message"},"Please Fill This Field."):null),i("div",{class:"input-container"},i("label",{htmlFor:"country"},"Country*"),i("select",{class:"country-dropdown",id:"country",onChange:t=>this.country=t.target.value},i("option",{value:"",disabled:true,selected:true},"Select Your Country"),s)),i("div",null,this.showFormError&&this.country.trim()===""?i("p",{class:"error-message"},"Please Fill This Field."):null),i("div",{class:"input-container"},i("label",{htmlFor:"city"},"City"),i("input",{type:"text",id:"city",placeholder:"",value:this.city,onChange:t=>this.city=t.target.value})),i("div",{class:"input-container"},i("label",{id:"address-lable",htmlFor:"address"},"Address"),i("textarea",{class:"",id:"address-textarea",rows:2,placeholder:"",value:this.adress,onInput:t=>this.adress=t.target.value})),i("div",{class:"input-container"},i("label",{htmlFor:"countryCode"},"Mobile"),i("select",{id:"countryCode",onChange:t=>this.countrycode=t.target.value},i("option",{value:"",disabled:true,selected:true},"Code"),e),i("br",null)),i("div",null,this.showFormError&&this.countrycode.trim()===""?i("p",{class:"error-message"},"Please Fill This Field."):null),i("div",{class:""},i("input",{type:"tel",id:"mobileNumber",placeholder:"",value:this.mobilenumber,onChange:t=>this.mobilenumber=t.target.value})),i("div",null,this.showFormError&&this.mobilenumber.trim()===""?i("p",{class:"error-message"},"Please Fill This Field."):null),i("div",{class:"checkbox"},i("input",{type:"checkbox",id:"termsCheckbox",name:"termsCheckbox",onChange:t=>this.handleCheckboxChange(t)}),i("label",{htmlFor:"termsCheckbox"},"Newsletter")),i("div",null,i("span",null,"Last used :"),i("span",null,"Language: ",i("span",{id:"b"},"EN")),i("span",null,"--- Currency: ",i("span",{id:"c"},"â‚¬"))),i("div",{class:"line-separator"}),i("button",{type:"submit",class:"full-width-button",onClick:t=>this.saveGuestDetailsClick(t)},"Save")))))]}return t}static get watchers(){return{data:["fetchGettedData"]}}};l.style=e;export{l as jji_guest_details};
//# sourceMappingURL=p-1b97f580.entry.js.map